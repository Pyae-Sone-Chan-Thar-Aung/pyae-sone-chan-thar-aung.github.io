<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Command & Stopwatch</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #4e54c8, #8f94fb);
            color: #fff;
            text-align: center;
            padding: 50px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }
        button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        button:active {
            background-color: rgba(255, 255, 255, 0.4);
            transform: translateY(1px);
        }
        #stopwatch {
            font-size: 48px;
            margin-top: 20px;
        }
        #transcription {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            max-width: 600px;
            width: 100%;
            font-size: 22px;
            text-align: left;
            overflow-y: auto;
            max-height: 300px;
        }
        #transcription p {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <h1>Voice Command & Stopwatch</h1>
    <button id="startStopwatch">Start Stopwatch</button>
    <div id="stopwatch">0:00</div>
    <div id="transcription"></div>

    <script>
        let seconds = 0;
        let interval;
        let isRunning = false;
        const stopwatchDisplay = document.getElementById('stopwatch');
        const transcriptionDisplay = document.getElementById('transcription');

        document.getElementById('startStopwatch').addEventListener('click', () => {
            if (!isRunning) {
                startStopwatch();
                startTranscription();
            } else {
                stopStopwatch();
            }
        });

        function startStopwatch() {
            isRunning = true;
            document.getElementById('startStopwatch').textContent = 'Stop Stopwatch';
            interval = setInterval(() => {
                seconds++;
                stopwatchDisplay.textContent = `${Math.floor(seconds / 60)}:${(seconds % 60).toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopStopwatch() {
            isRunning = false;
            document.getElementById('startStopwatch').textContent = 'Start Stopwatch';
            clearInterval(interval);
        }

        function startTranscription() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.interimResults = false;

            recognition.onresult = (event) => {
                const transcript = event.results[event.resultIndex][0].transcript;
                transcriptionDisplay.innerHTML += `<p>You said: "${transcript}"</p>`;
                handleCommand(transcript);
            };

            recognition.onend = () => {
                if (isRunning) {
                    startTranscription(); // Restart if running
                }
            };

            recognition.start();
        }

        async function handleCommand(command) {
            command = command.toLowerCase();

            // OpenAI API integration
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YOUR_API_KEY' // Replace with your OpenAI API key
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo',
                    messages: [{ role: 'user', content: command }]
                })
            });

            if (response.ok) {
                const data = await response.json();
                const botResponse = data.choices[0].message.content;
                transcriptionDisplay.innerHTML += `<p>Response: ${botResponse}</p>`;
            } else {
                handleFallbackCommands(command);
            }
        }

        function handleFallbackCommands(command) {
          if (command.includes('hi') || command.includes('hello')) { 
                transcriptionDisplay.innerHTML += `<p>Hello! How can I assist you today?</p>`;
            } else if (command.includes('how are you')) {
                transcriptionDisplay.innerHTML += `<p>I'm just a program developed by Mr. Pyae, but I'm here to help you!</p>`;
            } else if (command.includes('what is your name') || command.includes('who are you')) {
                transcriptionDisplay.innerHTML += `<p>I am your friendly assistant!</p>`;
            } else if (command.includes('i am sad') || command.includes('i am not ok')) {
                transcriptionDisplay.innerHTML += `<p>I'm sorry to hear that. How can I help?</p>`;
            } else if (command.includes('i am fine') || command.includes('i am good')) {
                transcriptionDisplay.innerHTML += `<p>Glad to hear! What would you like to do?</p>`;
            } else if (command.includes('sing a song')) {
                const song = "ðŸŽ¶ Twinkle, twinkle, little star, How I wonder what you are! ðŸŽ¶";
                transcriptionDisplay.innerHTML += `<p>Hereâ€™s a song: ${song}</p>`;
            } else if (command.includes('tell me a story')) {
                const story = "Once upon a time, in the southern part of the Philippines, there was a royal king named Pyae Sone. He was the bravest emperor of the whole universe. When he was young, he studied the BS in Computer Science and he became one of the most successful Computer Scientists and he create a litter artificial world called 'Creature.' Welcome to the world, how can I help you";
                transcriptionDisplay.innerHTML += `<p>Here's a story: ${story}</p>`;
            } else if (command.includes('wow')) {
                transcriptionDisplay.innerHTML += `<p>Thank You</p>`;  
            } else if (command.includes('curse')) {
                transcriptionDisplay.innerHTML += `<p>I do not support cursing. But if it makes you happy, BITCH! YAWA! Thank You, anything else?</p>`;    
            } else if (command.includes('curse again')) {
                transcriptionDisplay.innerHTML += `<p>Sorry I am innocent!</p>`;  
            } else if (command.includes('What can you do?')) {
                transcriptionDisplay.innerHTML += `<p>I am the program developed by Mr.Pyae. What I can assist you</p>`;
            } else if (command.includes('open a new tab')) {
                window.open('https://www.google.com', '_blank');
                transcriptionDisplay.innerHTML += `<p>Opening a new tab!</p>`;
            } else if (command.includes('open youtube')) {
                window.open('https://www.youtube.com', '_blank');
                transcriptionDisplay.innerHTML += `<p>Here's YouTube. Enjoy!</p>`;
            } else if (command.includes('open facebook')) {
                window.open('https://www.facebook.com', '_blank');
                transcriptionDisplay.innerHTML += `<p>Accessing Facebook for you!</p>`;
            } else if (command.includes('open the camera')) {
                alert('Camera access is not supported in this demo.'); 
            } else if (command.includes('stop')) {
                stopStopwatch(); 
                transcriptionDisplay.innerHTML += `<p>Stopwatch has been stopped.</p>`;
            } else if (command.includes('thank you')) {
                transcriptionDisplay.innerHTML += `<p>You're welcome! I'm here to help!</p>`;
            } else if (command.includes('goodbye')) {
                transcriptionDisplay.innerHTML += `<p>Goodbye! Have a great day!</p>`;
            } else {
                transcriptionDisplay.innerHTML += `<p>Sorry, I couldn't process that. Please try again.</p>`;
            }
        }
    </script>
</body>
</html>
