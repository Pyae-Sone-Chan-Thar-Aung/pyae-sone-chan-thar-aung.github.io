<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Command & Stopwatch</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            color: #fff;
            text-align: center;
            padding: 50px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        #stopwatch {
            font-size: 48px;
            margin-top: 20px;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }
        #transcription {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            font-size: 22px;
            text-align: left;
            overflow-y: auto;
            max-height: 300px;
        }
        .wave {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 60px;
            margin-top: 20px;
            width: 100%;
        }
        .wave div {
            width: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 5px;
            animation: wave 0.5s infinite ease-in-out;
        }
        @keyframes wave {
            0%, 100% { height: 10%; }
            50% { height: 100%; }
        }
        .wave div:nth-child(1) { animation-delay: 0s; }
        .wave div:nth-child(2) { animation-delay: 0.1s; }
        .wave div:nth-child(3) { animation-delay: 0.2s; }
        .wave div:nth-child(4) { animation-delay: 0.3s; }
        .wave div:nth-child(5) { animation-delay: 0.4s; }
    </style>
</head>
<body>
    <h1>Voice Command & Stopwatch</h1>
    <button id="startStopwatch">Start Stopwatch</button>
    <div id="stopwatch">0:00</div>
    <div class="wave" id="waveAnimation">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div id="transcription"></div>

    <script>
        let seconds = 0;
        let interval;
        let isRunning = false;
        const stopwatchDisplay = document.getElementById('stopwatch');
        const transcriptionDisplay = document.getElementById('transcription');

        // Button event listener to start/stop the stopwatch and transcription
        document.getElementById('startStopwatch').addEventListener('click', () => {
            if (!isRunning) {
                startStopwatch();
                startTranscription();
            } else {
                stopStopwatch();
            }
        });

        function startStopwatch() {
            isRunning = true;
            document.getElementById('startStopwatch').textContent = 'Stop Stopwatch';
            interval = setInterval(() => {
                seconds++;
                stopwatchDisplay.textContent = `${Math.floor(seconds / 60)}:${(seconds % 60).toString().padStart(2, '0')}`;
            }, 1000);
            startWaveAnimation();
        }

        function stopStopwatch() {
            isRunning = false;
            document.getElementById('startStopwatch').textContent = 'Start Stopwatch';
            clearInterval(interval);
            stopWaveAnimation();
        }

        function startTranscription() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.interimResults = false;

            recognition.onresult = (event) => {
                const transcript = event.results[event.resultIndex][0].transcript;
                transcriptionDisplay.innerHTML += `<p>${transcript}</p>`;
                handleCommand(transcript.toLowerCase());
            };

            recognition.onend = () => {
                if (isRunning) {
                    startTranscription(); // Restart if stopwatch is running
                }
            };

            recognition.start();
        }

        function startWaveAnimation() {
            const waves = document.querySelectorAll('.wave div');
            waves.forEach(wave => {
                wave.style.animation = ''; // Restart the wave animation
            });
        }

        function stopWaveAnimation() {
            const waves = document.querySelectorAll('.wave div');
            waves.forEach(wave => {
                wave.style.animation = 'none'; // Stop the wave animation
            });
        }

        function handleCommand(command) {
            const responses = {
                'hi': 'Hello! How can I assist you today?',
                'hello': 'Hi there! How can I help you?',
                'how are you': "I'm just a program developed by Mr. Pyae, but I'm here to help you!",
                'who is your developer': "Mr. Pyae Sone Chan Thar Aung, a second-year computer science student from UIC.",
                'what is your name': 'I am your friendly assistant!',
                'i am sad': "I'm sorry to hear that. How can I help?",
                'i am fine': 'Glad to hear! What would you like to do?',
                'sing': "ðŸŽ¶ Twinkle, twinkle, little star, How I wonder what you are! ðŸŽ¶",
                'story': "Once upon a time, in the southern part of the Philippines, there was a royal king named Pyae Sone. He was the bravest emperor of the whole universe. When he was young, he studied the BS in Computer Science and he became one of the most successful Computer Scientists and he create a litter artificial world called 'Creature.' Welcome to the world, how can I help you today",
                'wow': 'Thank you!',
                'what can you do': 'I can assist you with various tasks, like telling stories or opening websites!',
                'open a new tab': () => window.open('https://www.google.com', '_blank'),
                'open youtube': () => window.open('https://www.youtube.com', '_blank'),
                'open facebook': () => window.open('https://www.facebook.com', '_blank'),
                'stop': () => {
                    stopStopwatch();
                    transcriptionDisplay.innerHTML += `<p>Stopwatch has been stopped.</p>`;
                },
                'thank you': "You're welcome! I'm here to help!",
                'goodbye': 'Goodbye! Have a great day!',
                'bye-bye': 'Byebye! Have a great day!',
                'time': `The current time is ${new Date().toLocaleTimeString()}.`,
                'date': `Today's date is ${new Date().toLocaleDateString()}.`,
                'help': 'I can assist you with a variety of tasks. Just ask!',
                'where am I': getLocation,
                'weather': getWeather,
                // Add more commands here as needed
            };

            const commandKeys = Object.keys(responses);
            const foundCommand = commandKeys.find(key => command.includes(key));
            if (foundCommand) {
                if (typeof responses[foundCommand] === 'function') {
                    responses[foundCommand](); // Call the function for the command
                } else {
                    transcriptionDisplay.innerHTML += `<p>${responses[foundCommand]}</p>`;
                }
            } else {
                transcriptionDisplay.innerHTML += `<p>Sorry, I couldn't process that. Please try again.</p>`;
            }
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    const { latitude, longitude } = position.coords;
                    transcriptionDisplay.innerHTML += `<p>Your location coordinates are Latitude: ${latitude}, Longitude: ${longitude}.</p>`;
                    getWeather(latitude, longitude); // Optionally fetch weather info
                }, () => {
                    transcriptionDisplay.innerHTML += `<p>Unable to retrieve your location.</p>`;
                });
            } else {
                transcriptionDisplay.innerHTML += `<p>Geolocation is not supported by this browser.</p>`;
            }
        }

        function getWeather(latitude, longitude) {
            const apiKey = 'YOUR_API_KEY'; // Replace with your actual API key
            const apiUrl = `https://api.openweathermap.org/data/25/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}&units=metric`;

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const weather = `Current weather: ${data.weather[0].description}, Temperature: ${data.main.temp}Â°C`;
                    transcriptionDisplay.innerHTML += `<p>${weather}</p>`;
                })
                .catch(error => {
                    transcriptionDisplay.innerHTML += `<p>Unable to retrieve weather data: ${error.message}</p>`;
                });
        }
    </script>
</body>
</html>

