<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bros Party Game Collection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .age-warning {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        .age-warning h1 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .age-warning p {
            margin-bottom: 30px;
            font-size: 1.2em;
            max-width: 600px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .screen {
            display: none;
            width: 100%;
            text-align: center;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .player-setup {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .player-count-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .player-count-btn {
            padding: 18px 30px;
            border: none;
            border-radius: 15px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .player-count-btn:hover,
        .player-count-btn.selected {
            background: rgba(255,255,255,0.4);
            transform: scale(1.05);
            border-color: rgba(255,255,255,0.5);
        }

        .player-inputs {
            margin: 25px 0;
        }

        .player-input {
            margin: 12px 0;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-size: 1.1em;
            width: 280px;
            transition: all 0.3s ease;
        }

        .player-input:focus {
            outline: none;
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        .btn {
            padding: 18px 35px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .game-board {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            width: 100%;
            max-width: 700px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .current-player {
            font-size: 1.6em;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            font-weight: bold;
        }

        .mini-games {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .mini-game-btn {
            padding: 25px;
            border: none;
            border-radius: 15px;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
        }

        .mini-game-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(79, 172, 254, 0.4);
        }

        .punishment-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(45deg, #ff9a56, #ff6b6b);
            color: white;
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            z-index: 1000;
            max-width: 500px;
            text-align: center;
            transition: transform 0.4s ease;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .punishment-card.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .punishment-card h3 {
            margin-bottom: 20px;
            font-size: 1.8em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .punishment-card p {
            font-size: 1.3em;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .punishment-category {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 999;
            display: none;
            backdrop-filter: blur(5px);
        }

        .overlay.show {
            display: block;
        }

        .reaction-area {
            background: rgba(255,255,255,0.1);
            padding: 50px;
            border-radius: 20px;
            margin: 25px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .tic-tac-toe {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            max-width: 320px;
            margin: 25px auto;
        }

        .tic-cell {
            width: 90px;
            height: 90px;
            border: none;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 2.5em;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tic-cell:hover:not(:disabled) {
            background: rgba(255,255,255,0.4);
            transform: scale(1.05);
        }

        .math-question-area {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .math-inputs {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .player-math-input {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
        }

        .results-display {
            margin: 25px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            font-size: 1.2em;
        }

        .countdown {
            font-size: 3em;
            font-weight: bold;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .stats-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 5px;
        }

        .memory-area {
            background: rgba(255,255,255,0.08);
            padding: 30px 10px;
            border-radius: 18px;
            margin: 20px 0;
            min-height: 320px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 60px);
            grid-gap: 14px;
            justify-content: center;
            margin-bottom: 10px;
        }
        .memory-card {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.18);
            border-radius: 12px;
            font-size: 2em;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            transition: background 0.2s, transform 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            font-weight: bold;
        }
        .memory-card.revealed, .memory-card.matched {
            background: linear-gradient(45deg, #4ecdc4, #ff6b6b);
            color: #fff;
            transform: scale(1.08);
            cursor: default;
        }
        .memory-card.matched {
            opacity: 0.7;
        }
        @media (max-width: 600px) {
            #memory-grid {
                grid-template-columns: repeat(4, 40px);
                grid-gap: 8px;
            }
            .memory-card {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .game-header h1 {
                font-size: 2.2em;
            }
            
            .player-input {
                width: 220px;
            }
            
            .punishment-card {
                max-width: 90%;
                margin: 0 20px;
            }

            .mini-games {
                grid-template-columns: 1fr;
            }

            .math-inputs {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="age-warning" id="age-warning">
        <h1>üîû Adults Only</h1>
        <p>This game contains mature content and is intended for adults 21+ only. It includes adult themes, drinking games, and intimate challenges suitable for consenting adults in a private setting.</p>
        <p><strong>By continuing, you confirm that you are 21 years or older and consent to adult content.</strong></p>
        <button class="btn" onclick="confirmAge()">I am 21+ and Consent</button>
        <button class="btn" onclick="window.close()" style="background: #666;">Exit</button>
    </div>

    <div class="container" id="main-content" style="display: none;">
        <div class="game-header">
            <h1>üî• Naughty Night Games üî•</h1>
            <p>Adult party challenges for wild nights!</p>
        </div>

        <!-- Welcome Screen -->
        <div class="screen active" id="welcome-screen">
            <div class="player-setup">
                <h2>Welcome to the Wildest Party Game!</h2>
                <p>Get ready for spicy challenges, intimate dares, and unforgettable moments</p>
                
                <div class="player-count-selector">
                    <button class="player-count-btn" onclick="selectPlayerCount(2)">2 Players</button>
                    <button class="player-count-btn" onclick="selectPlayerCount(3)">3 Players</button>
                    <button class="player-count-btn" onclick="selectPlayerCount(4)">4 Players</button>
                    <button class="player-count-btn" onclick="selectPlayerCount(6)">6 Players</button>
                </div>
                
                <div class="player-inputs" id="player-inputs"></div>
                
                <button class="btn" onclick="startGame()" id="start-btn" style="display: none;">Start the Fun!</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="screen" id="game-screen">
            <div class="game-board">
                <div class="current-player" id="current-player">Player 1's Turn</div>
                
                <div class="mini-games">
                    <button class="mini-game-btn" onclick="playReactionTime()">‚ö° Speed Challenge</button>
                    <button class="mini-game-btn" onclick="playTicTacToe()">‚ùå Battle Zone</button>
                    <button class="mini-game-btn" onclick="playQuickMath()">üßÆ Brain Teaser</button>
                    <button class="mini-game-btn" onclick="playMemoryGame()">üß† Memory Test</button>
                    <button class="mini-game-btn" onclick="playTruthOrDare()">üíã Truth or Dare</button>
                    <button class="mini-game-btn" onclick="playDrinkingGame()">üç∑ Drinking Challenge</button>
                </div>
                
                <button class="btn" onclick="nextPlayer()">Next Player</button>
                <button class="btn" onclick="resetGame()">New Game</button>
            </div>
        </div>

        <!-- Mini-game Screens -->
        <div class="screen" id="reaction-screen">
            <div class="game-board">
                <h2>‚ö° Speed Challenge</h2>
                <div id="reaction-players" style="margin-bottom: 20px;"></div>
                <div class="reaction-area" id="reaction-area">
                    <h3 id="reaction-instruction">Get ready for the ultimate reaction test...</h3>
                    <div id="countdown-display"></div>
                </div>
                <div class="results-display" id="reaction-results"></div>
                <button class="btn" onclick="startReactionGame()">Start Challenge</button>
                <button class="btn" onclick="backToGame()">Back to Game</button>
            </div>
        </div>

        <div class="screen" id="tictactoe-screen">
            <div class="game-board">
                <h2>‚ùå Battle Zone</h2>
                <div id="ttt-players" style="margin-bottom: 20px;"></div>
                <div class="tic-tac-toe" id="tic-board"></div>
                <p id="ttt-status" style="font-size: 1.3em; margin: 20px 0;">Ready for battle!</p>
                <button class="btn" onclick="startTicTacToe()">Start Battle</button>
                <button class="btn" onclick="backToGame()">Back to Game</button>
            </div>
        </div>

        <div class="screen" id="math-screen">
            <div class="game-board">
                <h2>üßÆ Brain Teaser Duel</h2>
                <div id="math-players" style="margin-bottom: 20px;"></div>
                <div class="math-question-area">
                    <div id="math-question"></div>
                    <div class="math-inputs" id="math-inputs"></div>
                </div>
                <div class="results-display" id="math-results"></div>
                <button class="btn" onclick="startMathDuel()">Start Duel</button>
                <button class="btn" onclick="backToGame()">Back to Game</button>
            </div>
        </div>
        <div class="screen" id="memory-screen">
            <div class="game-board">
                <h2>üß† Memory Test</h2>
                <div id="memory-players" style="margin-bottom: 20px;"></div>
                <div class="memory-area">
                    <p id="memory-status" style="margin-bottom: 18px;">Click "Start Memory Game" to begin!</p>
                    <div id="memory-grid"></div>
                </div>
                <button class="btn" onclick="startMemoryGame()">Start Memory Game</button>
                <button class="btn" onclick="backToGame()">Back to Game</button>
            </div>
        </div>

        
        <div class="screen" id="truth-dare-screen">
            <div class="game-board">
                <h2>üíã Truth or Dare</h2>
                <div id="td-player" style="margin-bottom: 20px; font-size: 1.4em;"></div>
                <div style="margin: 30px 0;">
                    <button class="btn" onclick="chooseTruth()" style="background: linear-gradient(45deg, #4facfe, #00f2fe); margin: 10px;">Truth</button>
                    <button class="btn" onclick="chooseDare()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); margin: 10px;">Dare</button>
                </div>
                <div id="truth-dare-content" style="margin: 20px 0; min-height: 100px;"></div>
                <button class="btn" onclick="backToGame()">Back to Game</button>
            </div>
        </div>

        <div class="screen" id="drinking-screen">
            <div class="game-board">
                <h2>üç∑ Drinking Challenge</h2>
                <div id="drinking-player" style="margin-bottom: 20px; font-size: 1.4em;"></div>
                <div id="drinking-challenge" style="margin: 30px 0; min-height: 150px; background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px;"></div>
                <button class="btn" onclick="generateDrinkingChallenge()">New Challenge</button>
                <button class="btn" onclick="backToGame()">Back to Game</button>
            </div>
        </div>
    </div>

    <!-- Punishment Card Overlay -->
    <div class="overlay" id="overlay"></div>
    <div class="punishment-card" id="punishment-card">
        <div class="punishment-category" id="punishment-category"></div>
        <h3>Challenge Time! üî•</h3>
        <p id="punishment-text"></p>
        <button class="btn" onclick="closePunishmentCard()">I Accept!</button>
    </div>

    <script>
        // Game state
        let players = [];
        let currentPlayerIndex = 0;
        let playerCount = 0;
        let gameMode = 'sequential';
        let gameStats = {};

        // Adult punishment cards - spicy but tasteful
        const punishments = {
            intimate: [
                "Give someone a sensual 3-minutes shoulder massage üíÜ‚Äç‚ôÄÔ∏è",
                "Whisper something seductive in someone's ear üòò",
                "Do a slow sexy dance move for 45 seconds üíÉ",
                "Give the other player a passionate look  üíã",
                "Share your most romantic fantasy (keep it classy!) üåπ",
                "Do 10 slow, sexy push-ups üí™",
                "Compliment everyone here in a flirty way üòç",
                "Describe your ideal romantic evening in detail üïØÔ∏è",
                "Measure the other player's weight with your hands (consensual) ‚öñÔ∏è",
            ],
            drinking: [
                "Take 2 shots and do a victory dance! ü•É",
                "Finish your drink while maintaining eye contact with someone üëÄ",
                "Take a body shot (if everyone consents) üçã",
                "Drink with your non-dominant hand for the next 3 rounds üç∫",
                "Mix two drinks together and take 3 sips üç∏",
                "Chug a beer while doing squats üçª",
                "Take a shot for each person who's single in the room üíî",
                "Drink every time someone says your name for 10 minutes ‚è∞"
            ],
            spicy: [
                "Remove one piece of clothing (your choice) üëï",
                "Let the other player take off your clothe with foot technique üë£",
                "Share your most embarrassing bedroom story üò≥",
                "Do a strip tease to your favorite song (keep underwear on!) üéµ",
                "Let the other player give you a sexy nickname for the night üî•",
                "Describe your biggest turn-on in detail üòà",
                "Act out your favorite romantic movie scene üé¨",
                "Give someone a lap dance for 30 seconds üí∫",
                "Let someone else choose a body part for you to kiss (consensual) üíã",
                "Do your best sexy walk across the room in slow motion üö∂‚Äç‚ôÇÔ∏è",
                "Take your shirt off and let the other player see your best sexy pose üí™",
                "Half Naked",
                "Take off your pants",
                "Stay with your underwear for the next 3 rounds",
                "Hold the other player's thigh tighly for next 1 round",
                "Act and demostrate your favourite masturbation technique for 30 seconds üçë",
            ],
            wild: [
                "Switch clothes with someone for the next round üëî",
                "Take off your clothes until you're in your underwear ü©≤",
                "Do a body shot off yourself üçã",
                "Share a secret you've never told anyone ü§´",
                "Let someone pick your next drink AND how you drink it üçπ",
                "Recreate the last intimate moment you had (PG-13 version) üíï",
                "Text your ex something flirty (or skip if you prefer) üì±",
                "Do your best orgasm impression from a movie üé≠",
                "Let the group ask you 3 very personal questions üîç",
                "Sensual massage without clothes for 3 minutes with no talking üíÜ",
            ],
            creative: [
                "Write a sexy letter on someone's body ‚úçÔ∏è",
                "Create a seductive commercial for a random object üì∫",
                "Do an impression of someone in bed (keep it funny!) üòÇ",
                "Invent a new sex position name and describe it ü§∏‚Äç‚ôÄÔ∏è",
                "Draw what attraction looks like to you üé®",
                "Make up a dating profile for your pet üêï",
                "Act out how different animals would flirt ü¶Å",
                "Create a pickup line using only food names üçï",
                "Massage the other player while shirtless for 2 minutes üëê",
            ]
        };

        // Truth or Dare content
        const truthQuestions = [
            "What's the kinkiest thing you've ever done?",
            "Who in this room would you most want to sleep with?",
            "What's your biggest sexual fantasy?",
            "Have you ever had a one-night stand?",
            "What's the most adventurous place you've been intimate?",
            "What's your favorite position and why?",
            "Have you ever sent nudes to the wrong person?",
            "What's the longest you've gone without sex?",
            "What's your most embarrassing bedroom moment?",
            "Who was your best kiss and why?",
            "Have you ever been caught in a compromising position?",
            "What's your biggest turn-off in bed?",
            "Have you ever fantasized about someone in this room?",
            "What's the most number of people you've been with in one day?",
            "What's your guilty pleasure when it comes to porn?"
        ];

        const dareActions = [
            "Give the person to your left a sensual massage for 2 minutes",
            "Do a strip tease to the next song that plays",
            "Let someone blindfold you and feed you something",
            "Kiss the most attractive person in the room",
            "Let someone give you a hickey",
            "Do your best sexy crawl across the room",
            "Let the group choose a body part to lick whipped cream off of",
            "Wear something sexy that belongs to someone else",
            "Give someone a lap dance for a full song",
            "Let someone write something on your body with their finger",
            "Make out with your hand for 30 seconds",
            "Do your most seductive dance move",
            "Let someone spank you 5 times",
            "Whisper something dirty to everyone in the room",
            "Act out your favorite scene from an adult movie"
        ];

        const drinkingChallenges = [
            "üçª Beer Pong Solo: Try to bounce a ball into a cup 5 times. Drink for each miss!",
            "ü•É Shot Roulette: Everyone puts a shot in front of you. Spin a bottle to choose which to drink!",
            "üç∑ Wine Tasting: Someone pours mystery drinks. Guess what they are or drink them all!",
            "üç∫ Chug Challenge: Race to finish your drink while doing jumping jacks!",
            "üç∏ Cocktail Creation: Mix 3 random ingredients and drink your creation!",
            "ü•Ç Toast Master: Give a 2-minute toast about each person while drinking!",
            "üçπ Blindfolded Drinking: Someone feeds you drinks while blindfolded!",
            "üçæ Champagne Shower: Open a bottle and try to catch it all in your mouth!",
            "ü•É Power Hour: Take a shot every time someone says a chosen word for 10 minutes!",
            "üçª Flip Cup Solo: Try to flip a cup 10 times in a row or finish your drink!"
        ];

        function confirmAge() {
            document.getElementById('age-warning').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        }

        function selectPlayerCount(count) {
            playerCount = count;
            document.querySelectorAll('.player-count-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            event.target.classList.add('selected');
            gameMode = count === 2 ? 'competitive' : 'sequential';
            
            const inputsDiv = document.getElementById('player-inputs');
            inputsDiv.innerHTML = '';
            
            if (count === 2) {
                const modeInfo = document.createElement('p');
                modeInfo.style.color = '#ffeb3b';
                modeInfo.style.fontWeight = 'bold';
                modeInfo.style.margin = '15px 0';
                modeInfo.textContent = 'üî• Intimate Mode: Perfect for couples or close friends!';
                inputsDiv.appendChild(modeInfo);
            }
            
            for (let i = 1; i <= count; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'player-input';
                input.placeholder = `Player ${i} Name`;
                input.id = `player${i}`;
                inputsDiv.appendChild(input);
            }
            
            document.getElementById('start-btn').style.display = 'block';
        }

        function startGame() {
            players = [];
            for (let i = 1; i <= playerCount; i++) {
                const name = document.getElementById(`player${i}`).value || `Player ${i}`;
                players.push(name);
                gameStats[name] = { wins: 0, challenges: 0 };
            }
            
            showScreen('game-screen');
            updateCurrentPlayer();
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function updateCurrentPlayer() {
            if (gameMode === 'competitive') {
                document.getElementById('current-player').textContent = `üî• ${players[0]} vs ${players[1]} - Choose your battle! üî•`;
            } else {
                document.getElementById('current-player').textContent = `üéØ ${players[currentPlayerIndex]}'s Turn to Shine! ‚ú®`;
            }
        }

        function nextPlayer() {
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            updateCurrentPlayer();
        }

        function resetGame() {
           if (confirm('Are you sure you want to start a new game?')) {
               showScreen('welcome-screen');
               players = [];
               currentPlayerIndex = 0;
               playerCount = 0;
               gameStats = {};
               document.querySelectorAll('.player-count-btn').forEach(btn => {
                   btn.classList.remove('selected');
               });
               document.getElementById('player-inputs').innerHTML = '';
               document.getElementById('start-btn').style.display = 'none';
           }
       }

       function backToGame() {
           showScreen('game-screen');
       }

       function showPunishment(player, category = null) {
           const categories = Object.keys(punishments);
           const selectedCategory = category || categories[Math.floor(Math.random() * categories.length)];
           const punishment = punishments[selectedCategory][Math.floor(Math.random() * punishments[selectedCategory].length)];
           
           document.getElementById('punishment-category').textContent = selectedCategory.toUpperCase();
           document.getElementById('punishment-text').textContent = punishment;
           document.getElementById('overlay').classList.add('show');
           document.getElementById('punishment-card').classList.add('show');
           
           gameStats[player].challenges++;
       }

       function closePunishmentCard() {
           document.getElementById('overlay').classList.remove('show');
           document.getElementById('punishment-card').classList.remove('show');
       }

       // Reaction Time Game
       function playReactionTime() {
           showScreen('reaction-screen');
           document.getElementById('reaction-players').innerHTML = `<h3>Players: ${players.join(' vs ')}</h3>`;
           document.getElementById('reaction-results').innerHTML = '';
           document.getElementById('reaction-instruction').textContent = 'Get ready for the ultimate reaction test...';
           document.getElementById('countdown-display').innerHTML = '';
       }

       function startReactionGame() {
           const reactionArea = document.getElementById('reaction-area');
           const countdownDisplay = document.getElementById('countdown-display');
           const instruction = document.getElementById('reaction-instruction');
           
           instruction.textContent = 'Get ready...';
           
           let countdown = 3;
           const countdownInterval = setInterval(() => {
               countdownDisplay.innerHTML = `<div class="countdown">${countdown}</div>`;
               countdown--;
               
               if (countdown < 0) {
                   clearInterval(countdownInterval);
                   
                   const delay = Math.random() * 3000 + 1000; // 1-4 seconds
                   setTimeout(() => {
                       countdownDisplay.innerHTML = '<div style="font-size: 4em; color: #4ecdc4;">üöÄ CLICK NOW!</div>';
                       instruction.textContent = 'First to click wins!';
                       
                       const startTime = Date.now();
                       let gameEnded = false;
                       
                       const clickHandler = () => {
                           if (!gameEnded) {
                               gameEnded = true;
                               const reactionTime = Date.now() - startTime;
                               const winner = gameMode === 'competitive' ? 'Winner' : players[currentPlayerIndex];
                               
                               document.getElementById('reaction-results').innerHTML = `
                                   <h3>üèÜ ${winner} Wins!</h3>
                                   <p>Reaction time: ${reactionTime}ms</p>
                                   <p>Lightning fast reflexes! üöÄ</p>
                               `;
                               
                               if (gameMode === 'competitive') {
                                   const loser = Math.random() < 0.5 ? players[0] : players[1];
                                   setTimeout(() => showPunishment(loser, 'spicy'), 1500);
                               } else {
                                   gameStats[winner].wins++;
                               }
                               
                               reactionArea.removeEventListener('click', clickHandler);
                           }
                       };
                       
                       reactionArea.addEventListener('click', clickHandler);
                       
                   }, delay);
               }
           }, 1000);
       }

       // Tic Tac Toe Game
       function playTicTacToe() {
           showScreen('tictactoe-screen');
           if (gameMode === 'competitive') {
               document.getElementById('ttt-players').innerHTML = `<h3>${players[0]} (X) vs ${players[1]} (O)</h3>`;
           } else {
               document.getElementById('ttt-players').innerHTML = `<h3>${players[currentPlayerIndex]} vs AI</h3>`;
           }
       }

       let ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];
       let currentTTTPlayer = 'X';

       function startTicTacToe() {
           ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];
           currentTTTPlayer = 'X';
           
           const board = document.getElementById('tic-board');
           board.innerHTML = '';
           
           for (let i = 0; i < 9; i++) {
               const cell = document.createElement('button');
               cell.className = 'tic-cell';
               cell.onclick = () => makeMove(i);
               board.appendChild(cell);
           }
           
           document.getElementById('ttt-status').textContent = gameMode === 'competitive' ? 
               `${players[0]}'s turn (X)` : `${players[currentPlayerIndex]}'s turn (X)`;
       }

       function makeMove(index) {
           if (ticTacToeBoard[index] === '') {
               ticTacToeBoard[index] = currentTTTPlayer;
               document.getElementById('tic-board').children[index].textContent = currentTTTPlayer;
               
               if (checkWinner()) {
                   const winner = currentTTTPlayer === 'X' ? 
                       (gameMode === 'competitive' ? players[0] : players[currentPlayerIndex]) : 
                       (gameMode === 'competitive' ? players[1] : 'AI');
                   
                   document.getElementById('ttt-status').innerHTML = `üèÜ ${winner} Wins!`;
                   
                   if (gameMode === 'competitive') {
                       const loser = winner === players[0] ? players[1] : players[0];
                       setTimeout(() => showPunishment(loser, 'spicy'), 1500);
                   } else if (winner !== 'AI') {
                       gameStats[winner].wins++;
                   } else {
                       setTimeout(() => showPunishment(players[currentPlayerIndex], 'wild'), 1500);
                   }
                   
                   return;
               }
               
               if (ticTacToeBoard.every(cell => cell !== '')) {
                   document.getElementById('ttt-status').textContent = "It's a tie! Everyone gets a challenge!";
                   setTimeout(() => {
                       players.forEach(player => showPunishment(player, 'creative'));
                   }, 1500);
                   return;
               }
               
               currentTTTPlayer = currentTTTPlayer === 'X' ? 'O' : 'X';
               
               if (gameMode === 'sequential' && currentTTTPlayer === 'O') {
                   // AI move
                   setTimeout(makeAIMove, 500);
               } else {
                   const nextPlayer = currentTTTPlayer === 'X' ? players[0] : players[1];
                   document.getElementById('ttt-status').textContent = `${nextPlayer}'s turn (${currentTTTPlayer})`;
               }
           }
       }

       function makeAIMove() {
           const availableMoves = ticTacToeBoard.map((cell, index) => cell === '' ? index : null).filter(val => val !== null);
           if (availableMoves.length > 0) {
               const aiMove = availableMoves[Math.floor(Math.random() * availableMoves.length)];
               makeMove(aiMove);
           }
       }

       function checkWinner() {
           const winPatterns = [
               [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
               [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
               [0, 4, 8], [2, 4, 6] // diagonals
           ];
           
           return winPatterns.some(pattern => {
               const [a, b, c] = pattern;
               return ticTacToeBoard[a] && ticTacToeBoard[a] === ticTacToeBoard[b] && ticTacToeBoard[a] === ticTacToeBoard[c];
           });
       }

       // Quick Math Game
       function playQuickMath() {
           showScreen('math-screen');
           document.getElementById('math-players').innerHTML = `<h3>Brain Battle: ${players.join(' vs ')}</h3>`;
           document.getElementById('math-results').innerHTML = '';
       }

       function startMathDuel() {
           const num1 = Math.floor(Math.random() * 20) + 1;
           const num2 = Math.floor(Math.random() * 20) + 1;
           const operations = ['+', '-', '√ó'];
           const operation = operations[Math.floor(Math.random() * operations.length)];
           
           let correctAnswer;
           switch (operation) {
               case '+': correctAnswer = num1 + num2; break;
               case '-': correctAnswer = num1 - num2; break;
               case '√ó': correctAnswer = num1 * num2; break;
           }
           
           document.getElementById('math-question').innerHTML = `
               <h3 style="font-size: 3em; margin: 20px 0;">${num1} ${operation} ${num2} = ?</h3>
           `;
           
           const inputsDiv = document.getElementById('math-inputs');
           inputsDiv.innerHTML = '';
           
           const answers = {};
           players.forEach((player, index) => {
               const playerDiv = document.createElement('div');
               playerDiv.className = 'player-math-input';
               playerDiv.innerHTML = `
                   <h4>${player}</h4>
                   <input type="number" class="math-input" id="answer-${index}" placeholder="Your answer">
               `;
               inputsDiv.appendChild(playerDiv);
           });
           
           const submitBtn = document.createElement('button');
           submitBtn.className = 'btn';
           submitBtn.textContent = 'Submit Answers!';
           submitBtn.onclick = () => checkMathAnswers(correctAnswer);
           inputsDiv.appendChild(submitBtn);
       }

       function checkMathAnswers(correctAnswer) {
           const results = [];
           players.forEach((player, index) => {
               const answer = parseInt(document.getElementById(`answer-${index}`).value);
               const isCorrect = answer === correctAnswer;
               results.push({ player, answer, isCorrect });
           });
           
           const winners = results.filter(r => r.isCorrect);
           const losers = results.filter(r => !r.isCorrect);
           
           let resultText = `<h3>Correct Answer: ${correctAnswer}</h3>`;
           
           if (winners.length > 0) {
               resultText += `<h4>üèÜ Winners: ${winners.map(w => w.player).join(', ')}</h4>`;
               winners.forEach(winner => gameStats[winner.player].wins++);
           }
           
           if (losers.length > 0) {
               resultText += `<h4>‚ùå Wrong Answers: ${losers.map(l => `${l.player} (${l.answer})`).join(', ')}</h4>`;
               setTimeout(() => {
                   losers.forEach(loser => showPunishment(loser.player, 'intimate'));
               }, 2000);
           }
           
           if (winners.length === 0) {
               resultText += `<p>Nobody got it right! Everyone gets a challenge! üò±</p>`;
               setTimeout(() => {
                   players.forEach(player => showPunishment(player, 'drinking'));
               }, 2000);
           }
           
           document.getElementById('math-results').innerHTML = resultText;
       }

       

      let memoryItems = ["üí¶", "üçí", "üçÜ", "üçå", "üíã", "üëÖ", "üî•", "üçë", "üí¶", "üçí", "üçÜ", "üçå", "üíã", "üëÖ", "üî•", "üçë"]; // Duplicate for pairs
let firstCard = null, secondCard = null, lockBoard = false;

function playMemoryGame() {

    
           showScreen('memory-screen');
           if (gameMode === 'competitive') {
               document.getElementById('ttt-players').innerHTML = `<h3>${players[0]} (X) vs ${players[1]} (O)</h3>`;
           } else {
               document.getElementById('ttt-players').innerHTML = `<h3>${players[currentPlayerIndex]} vs AI</h3>`;
           }
       
}


function startMemoryGame() {
    const grid = document.getElementById('memory-grid');
    const status = document.getElementById('memory-status');
    grid.innerHTML = '';
    status.textContent = "Game started! Match the cards.";
    lockBoard = false;
    firstCard = null;
    secondCard = null;

    // Shuffle
    const shuffled = memoryItems.sort(() => 0.5 - Math.random());

    shuffled.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.dataset.value = item;
        card.onclick = () => revealCard(card);
        card.textContent = "‚ùì";
        grid.appendChild(card);
    });
}

function revealCard(card) {
    if (lockBoard || card.classList.contains('revealed')) return;

    card.textContent = card.dataset.value;
    card.classList.add('revealed');

    if (!firstCard) {
        firstCard = card;
    } else {
        secondCard = card;
        lockBoard = true;

        if (firstCard.dataset.value === secondCard.dataset.value) {
            // Match found
            setTimeout(() => {
                firstCard = null;
                secondCard = null;
                lockBoard = false;
                checkWin();
            }, 500);
        } else {
            // Not a match
            setTimeout(() => {
                firstCard.textContent = "‚ùì";
                secondCard.textContent = "‚ùì";
                firstCard.classList.remove('revealed');
                secondCard.classList.remove('revealed');
                firstCard = null;
                secondCard = null;
                lockBoard = false;
            }, 1000);
        }
    }
}

function checkWin() {
    const allCards = document.querySelectorAll('.memory-card');
    const revealed = Array.from(allCards).every(card => card.classList.contains('revealed'));
    if (revealed) {
        document.getElementById('memory-status').textContent = "üéâ You‚Äôve matched all the pairs!";
        setTimeout(() => showPunishment(players[currentPlayerIndex], 'wild'), 1500);
    } 
    
}
       // Truth or Dare
       function playTruthOrDare() {
           showScreen('truth-dare-screen');
           document.getElementById('td-player').textContent = `${players[currentPlayerIndex]}, choose your fate!`;
           document.getElementById('truth-dare-content').innerHTML = '';
       }

       function chooseTruth() {
           const truth = truthQuestions[Math.floor(Math.random() * truthQuestions.length)];
           document.getElementById('truth-dare-content').innerHTML = `
               <div style="background: rgba(79, 172, 254, 0.2); padding: 30px; border-radius: 15px;">
                   <h3 style="color: #4facfe; margin-bottom: 15px;">üíô TRUTH</h3>
                   <p style="font-size: 1.3em; line-height: 1.4;">${truth}</p>
                   <p style="margin-top: 20px; font-style: italic; color: #ccc;">Answer honestly! Everyone's listening... üëÇ</p>
               </div>
           `;
       }

       function chooseDare() {
           const dare = dareActions[Math.floor(Math.random() * dareActions.length)];
           document.getElementById('truth-dare-content').innerHTML = `
               <div style="background: rgba(255, 107, 107, 0.2); padding: 30px; border-radius: 15px;">
                   <h3 style="color: #ff6b6b; margin-bottom: 15px;">üî• DARE</h3>
                   <p style="font-size: 1.3em; line-height: 1.4;">${dare}</p>
                   <p style="margin-top: 20px; font-style: italic; color: #ccc;">No backing out now! üòà</p>
               </div>
           `;
       }

       // Drinking Game
       function playDrinkingGame() {
           showScreen('drinking-screen');
           document.getElementById('drinking-player').textContent = `üç∑ ${players[currentPlayerIndex]}'s Drinking Challenge!`;
           generateDrinkingChallenge();
       }

       function generateDrinkingChallenge() {
           const challenge = drinkingChallenges[Math.floor(Math.random() * drinkingChallenges.length)];
           document.getElementById('drinking-challenge').innerHTML = `
               <h3 style="color: #ff6b6b; margin-bottom: 20px;">üçª Challenge Accepted!</h3>
               <p style="font-size: 1.4em; line-height: 1.5; margin-bottom: 20px;">${challenge}</p>
               <p style="font-style: italic; color: #ffeb3b;">Remember to drink responsibly and know your limits! üç∫</p>
               <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-top: 20px;">
                   <small>‚ö†Ô∏è Always drink responsibly. Skip this challenge if you've had enough alcohol.</small>
               </div>
           `;
       }

       // Initialize the game
       window.onload = function() {
           // Add some party vibes
           console.log('üî• Welcome to Naughty Night Games! üî•');
           
           // Add keyboard shortcuts
           document.addEventListener('keydown', function(e) {
               if (e.key === 'Escape') {
                   closePunishmentCard();
               }
           });
       };
   </script>
</body>
</html>